(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0226":function(e,t,n){"use strict";var r=n("22ad"),o=n.n(r);o.a},"034f":function(e,t,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},"089f":function(e,t,n){e.exports=n.p+"img/mopcon.0cfaa3bb.png"},"0dba":function(e,t,n){e.exports=n.p+"img/NCUGC.c2c12c4b.png"},"0e5f":function(e,t,n){e.exports=n.p+"img/nchc.73816ec0.png"},1:function(e,t){},"135b":function(e,t,n){},"16c8":function(e,t,n){},"1df5":function(e,t,n){"use strict";var r=n("6166"),o=n.n(r);o.a},2:function(e,t){},"22ad":function(e,t,n){},"2c78":function(e,t,n){"use strict";var r=n("a3e7"),o=n.n(r);o.a},3:function(e,t){},4:function(e,t){},"44bf":function(e,t,n){"use strict";var r=n("9aeb"),o=n.n(r);o.a},"490c":function(e,t,n){"use strict";var r=n("135b"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("a4bb"),o=n.n(r),a=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Background"),n("router-view")],1)},s=[],c={name:"App"},u=c,l=(n("034f"),n("490c"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,null,null),f=d.exports,p=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Booth"}},[n("div",{staticClass:"content--wrapper"},[n("div",{staticClass:"subPage"},[n("div",{staticClass:"mobile subpage--title"},[n("div",{staticClass:"title--text"},[e._v(e._s(e.title.zh)+" - 攤位端")])]),n("div",{staticClass:"desktop subpage--title"},[n("div",{staticClass:"title--text"},[n("div",[e._v(e._s(e.title.zh)+" - 攤位端")]),n("div",{staticClass:"divider"}),n("div",[e._v(e._s(e.title.en)+" - Booth")])])])]),n("div",{staticClass:"content"},[n("div",{attrs:{role:"logo"}},[n("img",{attrs:{alt:"",src:e.boothLogo}})]),""!==e.boothToken?n("qrcode-reader",{staticClass:"scanner",attrs:{enable:e.qrState,width:"400px",height:"300px",noResult:!0},on:{OnSuccess:e.OnSuccess}}):e._e(),n("div",{attrs:{role:"messages"}},[n("p",{class:{"red--text":e.alertError,"green--text":e.alertSuccess}},[e._v(e._s(e.alertMessages))])])],1)]),n("Footer")],1)},v=[],m=(n("a481"),n("386d"),n("7f7f"),n("7514"),n("5176")),b=n.n(m),g=n("bc3a"),w=n.n(g),_=n("4328"),y=n.n(_),S=n("70de"),k={baseURL:S.serverUrl};b()(w.a.defaults,k);var C=function(){return w.a.get("/event/puzzle/deliverers").then(function(e){return e.data})},O=function(){return w.a.get(S.sponsorUrl).then(function(e){return e.data.map(function(e){return{logourl:"https://sitcon.org/2019/static/img/sponsor/"+e.image,name:{en:e.name.trim()}}})})},x=function(e){return w.a.get("/event/puzzle/deliverer",{params:{token:e}})},z=function(e,t){return w.a.post("/event/puzzle/deliver?token="+e,y.a.stringify({receiver:t}))},P=function(e){return w.a.get("/event/puzzle",{params:{token:e}})},T=function(e){return w.a.get("landing?token="+e).then(function(e){return e.data})},j=(n("28a5"),n("1c46")),E=n.n(j),L={parseQueryParams:function(e){return e.split("?").pop().split("&").map(function(e){var t=e.split("=");return{key:t.shift(),value:t.pop()}}).reduce(function(e,t){return e[t.key]=t.value,e},{})},sha1Gen:function(e){var t=E.a.createHash("sha1");return t.update(e),t.digest("hex")},StringFormat:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments).slice(1);return t.reduce(function(e,t,n){return e.replace("${"+(n+1)+"}",t)},e)}},M={name:"Booth",data:function(){return{title:S.title,boothName:"Unknow booth",boothToken:"",qrState:!0,buffer:"",alertMessages:"攤位驗證成功，掃描 QR Code 即可發送程式碼拼圖",alertError:!1,alertSuccess:!1,sponsorList:[]}},computed:{boothLogo:function(){var e=this,t=null;return"Unknow booth"!==this.boothName&&void 0!==(t=this.sponsorList.find(function(t){return t.name.en===e.boothName}))?t.logourl:""}},methods:{OnSuccess:function(e){var t=this;this.buffer!==e&&(this.buffer=e,z(this.boothToken,e).then(function(t){return T(e)}).then(function(e){t.alertMessages="成功幫 "+e.nickname+"蓋章囉 (・ω・)ノ",t.alertSuccess=!0,t.alertError=!1}).catch(function(e){if(e.response)switch(e.response.data.message){case"Already take from this deliverer":t.alertMessages="已經蓋過章囉(￣▽￣)";break;case"invalid receiver token":t.alertMessages="條碼好像不正確(⊙ω⊙)";break;case"token and receiver required":t.alertMessages="好像抓不到條碼(;´༎ຶД༎ຶ`)"}else t.alertMessages="網路可能有問題了_(´ཀ`」 ∠)_";t.alertError=!0,t.alertSuccess=!1}))},loadSponsor:function(){var e=this;O().then(function(t){e.sponsorList=t})}},mounted:function(){var e=this,t={};this.loadSponsor(),window.location.search.length>0&&(t=L.parseQueryParams(window.location.search))?x(t.token).then(function(n){e.boothToken=t.token,e.boothName=n.data.display_name}).catch(function(t){console.log(t),setTimeout(function(){e.$router.replace("/")},1e4)}):e.$router.replace("/")}},N=M,B=(n("2c78"),Object(l["a"])(N,h,v,!1,null,null,null)),R=B.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"PuzzleList"}},[n("div",{staticClass:"content--wrapper"},[n("div",{staticClass:"subPage",class:{hidden:e.hidden}},[n("div",{staticClass:"subpage--title"},[n("div",{staticClass:"title--text"},[e._v(e._s(e.title.zh))])]),n("div",{staticClass:"desktop subpage--title"},[n("div",{staticClass:"title--text"},[n("div",[e._v(e._s(e.title.zh))]),n("div",{staticClass:"divider"}),n("div",[e._v(e._s(e.title.en))])])])]),n("div",{staticClass:"content"},[e._m(0),e.showScanner?[n("qrcode-reader",{attrs:{enable:e.showScanner,noResult:!0,title:"",subTitle:"掃描 QR Code 檢視集章冊"},on:{OnSuccess:e.OnSuccess}})]:[n("div",{staticClass:"table"},[n("table",e._l(e.range,function(t){return n("tr",{key:"r"+t},e._l(e.range,function(r){return n("td",{key:"d"+r,class:{active:!e.table[5*t+r].element||e.table[5*t+r].element.active},style:{backgroundImage:"url("+(e.table[5*t+r].element?e.table[5*t+r].element.logourl:"")+")"},attrs:{"data-text":e.table[5*t+r].element&&""===e.table[5*t+r].element.logourl?e.table[5*t+r].element.name.en:""}})}),0)}),0)])]],2)]),n("Footer")],1)},$=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("SITCON 的參與者來自各地，今年更有來自多國、身懷絕技的業界與社群夥伴共襄盛舉。除了把握時間好好與他們聊聊外，據說每個攤位都隱藏了不為人知的秘密……？\n        "),n("br"),e._v("別忘了在年會當天打開 OPass「真．實境矩陣」，收集不同攤位的 QR Code 連成直線，就有機會兌換限量年會紀念品。連接你的節點，拯救我們的世界！\n        "),n("br"),n("br"),e._v("PS. SITCON 的 logo，請找有空的工作人員聊天認識一下，讓他幫你蓋個章！")])}],A=n("75fc"),I=[4539716,21300560,17967249,4762148];function q(e){var t=E.a.createHash("md5");return t.update(e),t.digest("hex")}function D(e,t){var n=e.charCodeAt(t);return n>96?n-87:n-48}function F(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Q(e,t,n){for(var r=q(n),o=Object(A["a"])(e),a=0;a<16;a++)F(o,D(r,a),15);for(var i=Object(A["a"])(t),s=0;s<8;s++)F(i,D(r,16+s)%8,7);for(var c=new Array(25),u=I[D(r,24)%4],l=0;l<25;l++)u>>l&1&&(c[l]={type:"community",element:i.shift()});c[12]={type:"free_space"};for(var d=0;d<25;d++)c[d]||(c[d]={type:"sponsor",element:o.shift()});return c}var H={name:"PuzzleList",data:function(){return{data:null,hidden:!1,token:"",title:S.title,booth:[],sponsorList:[],communityList:[{name:{en:"openSUSE Taiwan"},logourl:""},{name:{en:"SITCONxHK"},logourl:n("8033")},{name:{en:"MozTW 摩茲台灣社群"},logourl:""},{name:{en:"Monospace 社群友善空間"},logourl:""},{name:{en:"中央創遊"},logourl:n("0dba")},{name:{en:"全球学生开源年会"},logourl:""},{name:{en:"MOPCON 行動科技年會"},logourl:n("089f")},{name:{en:"TDOHacker"},logourl:n("9e20")}],range:[0,1,2,3,4]}},computed:{showScanner:function(){return""===this.token&&null===this.data},sponsors:function(){var e=this;return this.booth.filter(function(t){return void 0===e.communityList.find(function(e){return e.name.en===t})}).map(function(t){var n=e.sponsorList.find(function(e){return e.name.en===t});return n||{name:{en:t},logourl:""}}).map(function(t){return t.active=!(!e.data||!e.data.deliverer)&&e.data.deliverer.indexOf(t.name.en)>=0,t}).map(function(e){return"國網中心"===e.name.en&&(e.logourl=n("0e5f"),e.active=!0),e})},communities:function(){var e=this;return this.communityList.filter(function(t){return e.booth.indexOf(t.name.en)>=0}).map(function(t){return t.active=!(!e.data||!e.data.deliverer)&&e.data.deliverer.indexOf(t.name.en)>=0,t})},table:function(){return Q(this.sponsors,this.communities,this.token)}},methods:{OnSuccess:function(e){e!==this.token&&(window.location.search="token="+L.sha1Gen(e))},loadPuzzle:function(){var e=this;P(this.token).then(function(t){e.data=t.data}).catch(function(e){console.log(e),setTimeout(function(){window.location.search=""},3e3)})},loadDeliverers:function(){var e=this;C().then(function(t){e.booth=t})},loadSponsor:function(){var e=this;O().then(function(t){e.sponsorList=t})}},beforeMount:function(){var e={};window.location.search.length>0&&(e=L.parseQueryParams(window.location.search))&&(this.token=e.token,this.hidden="app"===e.mode,this.loadPuzzle()),this.loadSponsor(),this.loadDeliverers()}},G=H,J=(n("0226"),Object(l["a"])(G,U,$,!1,null,"43654a51",null)),K=J.exports;a["a"].use(p["a"]);var W=new p["a"]({routes:[{path:"/",component:K},{path:"/booth",component:R}]}),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"QrcodeReader"}},[n("center",[""!=e.title?n("h2",{staticClass:"ma-0"},[e._v(e._s(e.title))]):e._e(),e.webrtc?n("div",{attrs:{id:"camsource"}}):n("div",{attrs:{id:"uploadField"}},[n("label",{attrs:{id:"uploadButton",for:"upload"}}),n("input",{attrs:{type:"file",id:"upload"},on:{change:e.uploadChange}})]),""!==e.subTitle?n("p",{attrs:{role:"subTitle"}},[e._v(e._s(e.subTitle))]):e._e(),e.noResult?e._e():n("h6",{staticClass:"ma-0"},[e._v(e._s(e.result))])])],1)},X=[],Y=(n("4917"),{name:"QrcodeReader",props:{title:{type:String,default:""},subTitle:{type:String,default:""},enable:Boolean,noResult:Boolean,width:{type:String,default:"320px"},height:{type:String,default:"240px"}},data:function(){return{result:"Loading...",cam:null,webrtc:!0,scanner:null}},watch:{enable:function(e){var t=this;t.scanner.setStopped(!e)}},mounted:function(){var e=this;window.w69b.qr.decoding.setWorkerUrl("".concat("/","barcode.js/w69b.qrcode.decodeworker.min.js")),navigator.mediaDevices&&!window.navigator.userAgent.match(/iPhone|iPad|iPod/i)?(e.webrtc=!0,e.scanner=new window.w69b.qr.ui.ContinuousScanner,e.scanner.setDecodedCallback(function(t){e.onSuccess(t)}),e.scanner.render(document.getElementById("camsource"))):(e.webrtc=!1,console.log("Sorry, native web camera streaming (getUserMedia) is not supported by this browser..."))},beforeDestroy:function(){if(navigator.mediaDevices){var e=this;e.scanner.setStopped(!0),e.scanner.dispose()}},methods:{onSuccess:function(e){this.result=e,this.$emit("OnSuccess",e)},uploadChange:function(){var e=this,t=document.getElementById("upload").files[0],n=/^image\//;n.test(t.type)||console.log("File type not valid");var r=new FileReader;r.addEventListener("load",function(){var t=new Image;t.onload=function(n){var r=new window.w69b.qr.decoding.Decoder;r.decode(t).then(function(t){e.onSuccess(t.text)},function(){e.$emit("OnError","no qr code found")})},t.src=this.result}.bind(r),!1),r.readAsDataURL(t)}}}),Z=Y,ee=(n("1df5"),Object(l["a"])(Z,V,X,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{active:e.isActive},attrs:{role:"chip"}},[n("img",{attrs:{src:e.logourl}}),n("div",{attrs:{role:"seal"}})])},re=[],oe={name:"Chip",props:{displayName:{type:String,default:""},logoUri:{type:String,default:""},isActive:{type:Boolean,default:!1}},computed:{logourl:function(){return this.logoUri}}},ae=oe,ie=(n("44bf"),Object(l["a"])(ae,ne,re,!1,null,null,null)),se=ie.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Footer"}},[n("div",{staticClass:"content"},[e._v("\n    "+e._s(e.confName)+" | Fork on\n    "),n("a",{attrs:{href:"https://github.com/CCIP-App/CCIP-Puzzle-Bueno/",target:"_blank",alt:"Source code on GitHub"}},[e._v("GitHub")])])])},ue=[],le={name:"Footer",data:function(){return{confName:S.confName,chip:!0}}},de=le,fe=(n("ee86"),Object(l["a"])(de,ce,ue,!1,null,null,null)),pe=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"background"}})},ve=[],me={name:"Background",mounted:function(){}},be=me,ge=(n("cf63"),Object(l["a"])(be,he,ve,!1,null,"1355de4c",null)),we=ge.exports,_e={QrcodeReader:te,Chip:se,Footer:pe,Background:we};a["a"].config.productionTip=!1,o()(_e).forEach(function(e){a["a"].component(e,_e[e])}),new a["a"]({router:W,render:function(e){return e(f)}}).$mount("#app")},6166:function(e,t,n){},"64a9":function(e,t,n){},"70de":function(e){e.exports={serverUrl:"https://ccip.opass.app/",sponsorUrl:"https://sitcon.org/2019/static/json/sponsor.json",title:{zh:"真．實境矩陣",en:"Booth Reward Activity"},confName:"SITCON 2019"}},8033:function(e,t,n){e.exports=n.p+"img/SITCONxHK.9c7e1106.png"},"9aeb":function(e,t,n){},"9e20":function(e,t,n){e.exports=n.p+"img/TDOH.d8a25be3.png"},a1a8:function(e,t,n){},a3e7:function(e,t,n){},cf63:function(e,t,n){"use strict";var r=n("a1a8"),o=n.n(r);o.a},ee86:function(e,t,n){"use strict";var r=n("16c8"),o=n.n(r);o.a}});
//# sourceMappingURL=app.ac8387ec.js.map